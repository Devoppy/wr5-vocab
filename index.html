<!DOCTYPE html>
<html lang="en">
<head>

<link rel="manifest" href="/wr5-vocab/manifest.json">
<meta name="theme-color" content="#0f1115">

<meta charset="UTF-8" />
<title>WR5 â€“ Word Audio Drill</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>

*{ box-sizing:border-box; }
html, body{ overflow-x:hidden; }


  :root{
  --bg:#ffffff;
  --card:#f2f4f8;
  --text:#0f1115;
  --muted:#6b7280;
  --accent:#4da3ff;
  --border:#e5e7eb;
}


body{
  margin: 0;
  background: var(--bg);
  color: var(--text);
}


body.dark{
  --bg:#0f1115;
  --card:#161a22;
  --text:#e8eaf0;
  --muted:#9aa0b4;
  --accent:#4da3ff;
  --border:#222;
}


header {
  font-family: "Segoe UI", system-ui, sans-serif;
  letter-spacing: 0.3px;
}



  header {
    padding: 16px;
    font-size: 18px;
    font-weight: 600;
    border-bottom: 1px solid var(--border);

  }



.container{
  padding:12px;
  max-width:820px;
  margin:0 auto;
}


.word{
  display:flex;
  align-items:center;
  justify-content:flex-start;
  gap:8px;
  background:var(--card);
  padding:14px 16px;
  border-radius:10px;
  width:420px;
}


.word-left{
  flex:0 1 auto;
}


  .play {
    font-size: 24px;
    cursor: pointer;
    color: var(--accent);
    user-select: none;
  }

  .play:active {
    transform: scale(0.92);
  }

  footer {
    padding: 12px;
    font-size: 12px;
    color: var(--muted);
    text-align: center;
  }



header{
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:center;
  gap:12px;
}




#themeBtn,
#toggleSpanish{
  background:transparent;
  color:var(--text);
  border:1px solid var(--border);
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
  font-size:13px;
  font-weight:600;
}


#themeBtn:active{ transform:scale(0.96); }

textarea{
  background:var(--card) !important;
  color:var(--text) !important;
  border:1px solid var(--border) !important;
}


.word-translation {
  display: none;
  font-size: 13px;
  font-style: italic;
  font-family: Calibri, Arial, sans-serif;
  font-weight: 400;
  color: var(--muted);
  margin-top: 4px;
  opacity: 1;
}

.btn{
  width:auto;                 
  display:inline-flex;
  align-items:center;
  justify-content:center;

  background: transparent;
  color: var(--text);
  border: 1px solid var(--border);

  padding: 8px 12px;          
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;

  cursor: pointer;
  margin: 0;                  
}

.btn:hover{ background: var(--card); }
.btn:active{ transform: scale(0.96); }


.tool-row{
  display:flex;
  justify-content:center;
  gap:10px;
  margin:12px 0 18px 0;
}


.word-text{
  font-size:17px;
  font-weight:600;
}

.word-translation{
  font-size:14px;
}



*{
  box-sizing: border-box;
}

html, body{
  overflow-x: hidden;
}


#input{
  width:100%;
  height:120px;
  background:var(--card);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:8px;
  padding:10px;
  margin-bottom:10px;
  font-size:14px;
}


.play{
  width:32px;
  height:32px;

  display:flex;
  align-items:center;
  justify-content:center;

  border-radius:50%;
  background:transparent;
  color:var(--text);

  cursor:pointer;
  transition:background 0.18s ease, transform 0.08s ease;
}

/* Soft halo hover */
.play:hover{
  background:rgba(255,255,255,0.06);
}

/* Press */
.play:active{
  transform:scale(0.92);
}



.title{
  font-weight:600;
  font-size:18px;
}



#list{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
}



.tool-row{
  width:420px;
  margin:12px auto 18px auto;
}



.title{
  justify-self:start;
}

#toggleSpanish{
  justify-self:end;
}





</style>


</head>


<body>

<header>

  <div class="title">WR5 Vocab</div>

  <button id="themeBtn" title="Toggle theme">Dark</button>


<button id="toggleSpanish" onclick="toggleSpanish()">
  Show Spanish
</button>



</header>


<div class="container">

<textarea id="input" placeholder=""></textarea>



<div class="tool-row">

<button onclick="loadWords()" class="btn">Load</button>
<button onclick="startAutoPlay()" class="btn">Auto</button>
<button onclick="stopAutoPlay()" class="btn">Stop</button>

</div>



<div class="container" id="list"></div>



<script>
  const synth = window.speechSynthesis;
  const list = document.getElementById("list");

  function speak(word) {
    if (!synth) return;
    synth.cancel();
    const utter = new SpeechSynthesisUtterance(word);
    utter.lang = "en-US";   // change to en-GB if needed
    utter.rate = 0.9;
    synth.speak(utter);
  }

  function loadWords() {
  list.innerHTML = "";
  const raw = document.getElementById("input").value.trim();
  if (!raw) return;

  const rows = raw
    .split(/\r?\n/)
    .map(line => line.split("\t"))
    .filter(parts => parts[0]);

  rows.forEach(([en, es]) => {
    const row = document.createElement("div");
    row.className = "word";

    const textWrap = document.createElement("div");
textWrap.className = "word-left";


    const enText = document.createElement("div");
    enText.className = "word-text";
    enText.textContent = en.trim();

    textWrap.appendChild(enText);

    if (es) {
      const esText = document.createElement("div");
      esText.className = "word-translation";
      esText.textContent = es.trim();
      textWrap.appendChild(esText);
    }

    const play = document.createElement("div");
    play.className = "play";
play.innerHTML = `
<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" opacity="0.85">
  <path d="M5 9v6h4l5 5V4L9 9H5z"/>
</svg>
`;

    play.onclick = () => speak(en.trim());

    row.appendChild(textWrap);
    row.appendChild(play);
    list.appendChild(row);
  });
}

const themeBtn = document.getElementById("themeBtn");

function applyTheme(mode){
  document.body.classList.toggle("dark", mode === "dark");
  themeBtn.textContent = (mode === "dark") ? "Light" : "Dark";
  localStorage.setItem("wr5_theme", mode);
}

themeBtn.addEventListener("click", () => {
  const current = document.body.classList.contains("dark") ? "dark" : "light";
  applyTheme(current === "dark" ? "light" : "dark");
});

// default: Light, but remember last choice
applyTheme(localStorage.getItem("wr5_theme") || "light");


</script>



<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/wr5-vocab/service-worker.js', {
    scope: '/wr5-vocab/'
  });
}
</script>


<script>
let autoIndex = 0;
let autoWords = [];
let autoRunning = false;

function autoPlayNext() {
  if (!autoRunning || autoIndex >= autoWords.length) {
    autoRunning = false;
    return;
  }

 speechSynthesis.cancel(); 

  const utter = new SpeechSynthesisUtterance(autoWords[autoIndex]);
  utter.lang = "en-US";
  utter.rate = 0.9;

  utter.onend = () => {
    autoIndex++;
    setTimeout(autoPlayNext, 300);
  };


utter.onerror = () => {              
  autoIndex++;
  setTimeout(autoPlayNext, 300);
};


  speechSynthesis.speak(utter);
	
}

function startAutoPlay() {
  const raw = document.getElementById("input").value.trim();
  if (!raw) return;

  autoWords = raw
    .split(/\r?\n/)
    .map(line => line.split("\t")[0].trim())
    .filter(Boolean);

  autoIndex = 0;
  autoRunning = true;      // MUST be true
  speechSynthesis.cancel();
  autoPlayNext();
}



function stopAutoPlay() {
  autoRunning = false;
  autoIndex = 0;
  speechSynthesis.cancel();
}






</script>


<script>
let spanishVisible = false;

function toggleSpanish() {
  spanishVisible = !spanishVisible;

  document.querySelectorAll(".word-translation").forEach(el => {
    el.style.display = spanishVisible ? "block" : "none";
  });

  document.getElementById("toggleSpanish").textContent =
    spanishVisible ? "Hide Spanish" : "Show Spanish";
}
</script>





</body>
</html>




